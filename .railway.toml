[build]
builder = "NIXPACKS"

[deploy]
# Pre-deploy: Migrations et seeders
# Exécuté UNE FOIS avant le démarrage
preDeployCommand = "bash railway/init-app.sh"

# Start: Démarrage de l'application avec Laravel Octane
# Octane garde l'app en mémoire = 10x plus rapide que php artisan serve
# Le script startup.sh permet d'exécuter des tâches avec les variables d'environnement disponibles
startCommand = "bash railway/startup.sh"
healthcheckPath = "/"
healthcheckTimeout = 100
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
